:root{ --bg:#0b0b14; --fg:#f7f2ff; --acc:#ff7a00; --vio:#7a3cff; --red:#ff3b3b; --green:#31d27c; }
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif;background:radial-gradient(1200px 800px at 70% -10%, #1b1440 0%, rgba(27,20,64,0) 60%) , var(--bg);color:var(--fg)}
.wrap{display:flex;min-height:100%;}
canvas{display:block; width:100%; height:100vh; outline:none}

/* UI Overlay */
.hud{position:fixed;inset:0;pointer-events:none}
.hud-inner{position:absolute;left:0;right:0;top:0;display:flex;gap:12px;align-items:center;justify-content:space-between;padding:12px 16px}
.pill{backdrop-filter: blur(8px); background:rgba(10,10,20,.35); border:1px solid rgba(255,255,255,.08); color:var(--fg); padding:8px 12px; border-radius:999px; font-weight:700; letter-spacing:.2px; box-shadow:0 8px 24px rgba(0,0,0,.3)}
.score{font-variant-numeric:tabular-nums}
.btns{display:flex; gap:8px; pointer-events:auto}
.btn{cursor:pointer; user-select:none}
.btn:active{transform:translateY(1px)}

/* Centered modal */
.modal{position:fixed; inset:0; display:grid; place-items:center; background:linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.4));}
.card{width:min(980px,92vw); border-radius:24px; padding:24px; border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg, rgba(16,16,28,.9), rgba(16,16,28,.7)); box-shadow:0 30px 80px rgba(0,0,0,.45)}
h1{margin:0 0 8px; font-size:clamp(28px, 4vw, 40px)}
.sub{opacity:.85; margin:0 0 16px; line-height:1.5}
.row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
.row-controls{margin-top:8px; gap:10px;}
.primary{pointer-events:auto; cursor:pointer; padding:14px 18px; border-radius:14px; background:linear-gradient(180deg, var(--acc), #ff5e00); color:#190b00; font-weight:900; border:none; box-shadow:0 12px 24px rgba(255,122,0,.26)}
.ghost{color:#fff; opacity:.9}
.kbd{padding:6px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06)}

/* Rules & how section */
.rules{margin:0 0 16px 16px; line-height:1.7}
#how{display:none; margin-top:12px; opacity:.9}
.howline{margin:0 0 6px}

/* 점수 제출 */
#submitWrap{display:none; margin-top:12px;}
.submit-row{display:flex; gap:8px; flex-wrap:wrap; align-items:center;}
.submit-input{flex:1; min-width:180px; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06); color:var(--fg);}
#submitMsg{margin:8px 0 0 0; display:none;}

/* 십자형 D-Pad (모바일 전용) */
.pad{ position:fixed; bottom:16px; right:16px; width:160px; height:160px; pointer-events:auto; }
.pad-btn{ position:absolute; width:56px; height:56px; border-radius:14px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.05); color:var(--fg); font-weight:700; touch-action:none; }
.pad-up{    left:52px; top:0;     }
.pad-down{  left:52px; bottom:0;  }
.pad-left{  left:0;    top:52px;  }
.pad-right{ right:0;   top:52px;  }
.pad-center{ position:absolute; left:52px; top:52px; width:56px; height:56px; border-radius:14px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.03); pointer-events:none; }
@media (max-width: 900px){ .pad{display:none} }

/* Leaderboard list rows */
.lb-row{display:flex; gap:8px; align-items:center; padding:6px 8px; border-bottom:1px solid rgba(255,255,255,.06);}
.lb-rank{width:28px; text-align:right; opacity:.8;}
.lb-name{flex:1; font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.lb-score{width:80px; text-align:right;}
#lbWrap{display:block; margin-top:0;}
.lb-header{display:flex; gap:8px; align-items:center; justify-content:space-between; margin-bottom:8px;}
.lb-header-actions{display:flex; gap:6px;}
#lbList{max-height:360px; overflow:auto; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:8px; background:rgba(255,255,255,.04); min-height:120px;}
.lb-error-detail{opacity:.7;}

/* 메인 모달 그리드: 좌측 설명, 우측 리더보드 */
.modal-grid{ display:grid; grid-template-columns: 1.2fr 1fr; gap:16px; align-items:start; }
@media (max-width: 860px){ .modal-grid{ grid-template-columns: 1fr; } }
